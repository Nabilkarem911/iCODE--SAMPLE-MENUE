<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙˆÙ„Ø§Ø¡ | ÙˆØ§Ùˆ Ø¨Ø´Ø§Ù…ÙŠÙ„</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8fafc; }
        .loyalty-card {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border-radius: 25px; padding: 25px; color: white;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2); position: relative; overflow: hidden;
        }
        .loyalty-card::before {
            content: ''; position: absolute; top: -50px; right: -50px;
            width: 150px; height: 150px; background: rgba(255, 159, 28, 0.1);
            border-radius: 50%;
        }
        .stamp-grid { display: flex; justify-content: space-between; margin-top: 25px; position: relative; z-index: 10; }
        .stamp-slot {
            width: 50px; height: 50px; background: rgba(255,255,255,0.1);
            border: 2px dashed rgba(255,255,255,0.3); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            transition: 0.3s; position: relative;
        }
        .stamp-slot.filled {
            background: #FF9F1C; border-style: solid; border-color: #FF9F1C;
            box-shadow: 0 0 15px rgba(255, 159, 28, 0.5); transform: scale(1.1);
        }
        .stamp-slot.filled i { display: block; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .stamp-slot i { display: none; color: white; font-size: 24px; }
        
        .gift-box {
            margin-top: 30px; background: white; border-radius: 20px; padding: 20px;
            text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            border: 1px solid #f3f4f6; opacity: 0.5; filter: grayscale(1); transition: 0.3s;
        }
        .gift-box.unlocked { opacity: 1; filter: grayscale(0); border-color: #FF9F1C; transform: scale(1.02); }
        
        @keyframes popIn { 0% { transform: scale(0); } 80% { transform: scale(1.2); } 100% { transform: scale(1); } }
    </style>
</head>
<body class="bg-gray-50 pb-10">

    <div class="bg-white p-4 flex justify-between items-center shadow-sm sticky top-0 z-50">
        <h1 class="text-xl font-black text-gray-800">Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ÙˆÙ„Ø§Ø¡ ğŸ‘‘</h1>
        <a href="index.html" class="w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200"><i class="fa-solid fa-arrow-left"></i></a>
    </div>

    <div class="p-6">
        <div class="text-center mb-6">
            <h2 class="text-2xl font-black text-gray-800 mb-2">Ø¬Ù…Ù‘Ø¹ ÙˆØ§ÙƒØ³Ø¨! ğŸ</h2>
            <p class="text-gray-500 text-sm">Ø§Ø·Ù„Ø¨ 5 Ù…Ø±Ø§Øª ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ <span class="text-orange-500 font-bold">ÙˆØ¬Ø¨Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</span> Ù…Ù† Ø§Ø®ØªÙŠØ§Ø±Ùƒ.</p>
        </div>

        <div class="loyalty-card">
            <div class="flex justify-between items-center mb-2">
                <div>
                    <p class="text-xs text-gray-400">Ø¹Ø¯Ø¯ Ø·Ù„Ø¨Ø§ØªÙƒ</p>
                    <h3 class="text-3xl font-bold text-white"><span id="stamp-count">0</span>/5</h3>
                </div>
                <img src="images/logo.png" class="w-12 h-12 rounded-lg bg-white/10 p-1">
            </div>
            
            <div class="w-full bg-gray-700 h-2 rounded-full mt-2 overflow-hidden">
                <div class="bg-orange-500 h-full transition-all duration-1000" style="width: 0%" id="progress-bar"></div>
            </div>

            <div class="stamp-grid">
                <div class="stamp-slot" id="slot-1"><i class="fa-solid fa-check"></i></div>
                <div class="stamp-slot" id="slot-2"><i class="fa-solid fa-check"></i></div>
                <div class="stamp-slot" id="slot-3"><i class="fa-solid fa-check"></i></div>
                <div class="stamp-slot" id="slot-4"><i class="fa-solid fa-check"></i></div>
                <div class="stamp-slot" id="slot-5"><i class="fa-solid fa-gift"></i></div>
            </div>
        </div>

        <button onclick="addStamp()" class="w-full mt-6 bg-gray-200 text-gray-600 py-3 rounded-xl font-bold text-sm hover:bg-gray-300 transition dashed border-2 border-gray-400">
            [ØªØ¬Ø±Ø¨Ø©] Ø¥Ø¶Ø§ÙØ© Ø®ØªÙ… +1 ğŸ› ï¸
        </button>

        <div class="gift-box" id="reward-box">
            <div class="w-16 h-16 bg-orange-100 text-orange-500 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl">
                <i class="fa-solid fa-gift"></i>
            </div>
            <h3 class="font-bold text-lg text-gray-800">ÙˆØ¬Ø¨ØªÙƒ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©!</h3>
            <p class="text-xs text-gray-500 mb-4">ÙƒÙˆØ¯ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ:</p>
            <div class="bg-gray-100 p-3 rounded-lg font-mono font-bold text-xl tracking-widest text-gray-800 select-all" id="coupon-code">------</div>
            <button onclick="copyCoupon()" class="w-full bg-orange-500 text-white py-3 rounded-xl font-bold mt-4 shadow-lg hover:bg-orange-600 transition" id="claim-btn" disabled>Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡</button>
        </div>
    </div>

    <script>
        // Load stamps from Storage
        let stamps = parseInt(localStorage.getItem('wowStamps')) || 0;
        
        function updateUI() {
            // Cap at 5
            if(stamps > 5) stamps = 5;
            
            document.getElementById('stamp-count').innerText = stamps;
            document.getElementById('progress-bar').style.width = (stamps * 20) + '%';

            // Update Slots
            for(let i=1; i<=5; i++) {
                const slot = document.getElementById(`slot-${i}`);
                if(i <= stamps) {
                    slot.classList.add('filled');
                } else {
                    slot.classList.remove('filled');
                }
            }

            // Check Reward
            const box = document.getElementById('reward-box');
            const btn = document.getElementById('claim-btn');
            const code = document.getElementById('coupon-code');

            if(stamps >= 5) {
                box.classList.add('unlocked');
                btn.disabled = false;
                code.innerText = "FREE-MEAL-99";
                code.classList.add('text-orange-600');
                
                // Celebration once
                if(!sessionStorage.getItem('celebrated')) {
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    sessionStorage.setItem('celebrated', 'true');
                }
            } else {
                box.classList.remove('unlocked');
                btn.disabled = true;
                code.innerText = "------";
            }
        }

        // Add Stamp Logic
        function addStamp() {
            if(stamps < 5) {
                stamps++;
                localStorage.setItem('wowStamps', stamps);
                updateUI();
            } else {
                alert("Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙˆØµÙ„Øª Ù„Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø¢Ù†.");
            }
        }

        function copyCoupon() {
            navigator.clipboard.writeText("FREE-MEAL-99");
            alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯! Ø§Ø³ØªØ®Ø¯Ù…Ù‡ ÙÙŠ Ø§Ù„Ø³Ù„Ø©.");
            // Reset logic could go here (optional)
            // stamps = 0; localStorage.setItem('wowStamps', 0); updateUI();
        }

        // Init
        updateUI();
    </script>
</body>
</html>
