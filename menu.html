<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="theme-color" content="#FF9F1C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/logo.png">
    
    <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù… | ÙˆØ§Ùˆ Ø¨Ø´Ø§Ù…ÙŠÙ„</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8fafc; padding-bottom: 100px; scroll-behavior: smooth; }
        
        /* SEARCH BAR (NEW) */
        .search-container { position: sticky; top: 70px; z-index: 35; background: #f8fafc; padding: 10px 15px; transition: 0.3s; }
        .search-box { position: relative; width: 100%; }
        .search-input { width: 100%; background: white; border: 1px solid #e2e8f0; border-radius: 15px; padding: 12px 45px 12px 15px; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); outline: none; transition: 0.3s; }
        .search-input:focus { border-color: #FF9F1C; box-shadow: 0 4px 15px rgba(255, 159, 28, 0.15); }
        .search-icon { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); color: #9ca3af; }
        html[dir="ltr"] .search-input { padding: 12px 15px 12px 45px; }
        html[dir="ltr"] .search-icon { right: auto; left: 15px; }

        /* FAVORITE HEART (NEW) */
        .fav-btn-card { position: absolute; top: 10px; right: 10px; width: 30px; height: 30px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 10; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.2s; color: #9ca3af; }
        html[dir="ltr"] .fav-btn-card { right: auto; left: 10px; }
        .fav-btn-card.active { color: #ef4444; transform: scale(1.1); }
        .fav-btn-card.active i { font-weight: 900; }

        /* Existing Styles (Optimized) */
        .marquee-strip { background: #FFF7ED; overflow: hidden; white-space: nowrap; padding: 8px 0; border-bottom: 1px solid #FFEDD5; }
        .marquee-content { display: inline-block; animation: scrollLeft 30s linear infinite; }
        .marquee-item { display: inline-flex; align-items: center; gap: 5px; margin: 0 20px; font-size: 12px; font-weight: bold; color: #9A3412; }
        @keyframes scrollLeft { 0% { transform: translateX(0); } 100% { transform: translateX(50%); } }
        .slider-container { position: relative; width: 100%; overflow: hidden; padding: 10px 0; }
        .slider-track { display: flex; gap: 15px; overflow-x: auto; scroll-behavior: smooth; padding: 0 15px; scrollbar-width: none; }
        .slider-track::-webkit-scrollbar { display: none; }
        .offer-card { flex: 0 0 85%; height: 160px; border-radius: 18px; overflow: hidden; position: relative; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        @media (min-width: 768px) { .offer-card { flex: 0 0 40%; height: 220px; } }
        .offer-card img { width: 100%; height: 100%; object-fit: cover; }
        .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 35px; height: 35px; background: rgba(255, 255, 255, 0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.15); cursor: pointer; z-index: 20; color: #FF5400; transition: 0.2s; }
        html[dir="rtl"] .prev-btn { right: 10px; } html[dir="rtl"] .next-btn { left: 10px; }
        html[dir="ltr"] .prev-btn { left: 10px; transform: rotate(180deg); } html[dir="ltr"] .next-btn { right: 10px; transform: rotate(180deg); }
        /* Sticky Categories adjusted for Search Bar */
        .sticky-cats { position: sticky; top: 0; z-index: 40; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); box-shadow: 0 4px 20px rgba(0,0,0,0.05); padding: 10px 0; border-bottom: 1px solid #f1f5f9; }
        .cat-scroll { display: flex; overflow-x: auto; gap: 15px; padding: 0 15px; scrollbar-width: none; }
        .cat-item { display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer; transition: 0.3s; opacity: 0.7; min-width: 60px; }
        .cat-item.active { opacity: 1; transform: scale(1.05); }
        .cat-circle { width: 55px; height: 55px; border-radius: 50%; overflow: hidden; border: 2px solid transparent; transition: 0.3s; background: #f1f5f9; display: flex; align-items: center; justify-content: center; }
        .cat-item.active .cat-circle { border-color: #FF9F1C; box-shadow: 0 4px 12px rgba(255, 159, 28, 0.3); }
        .cat-circle img { width: 100%; height: 100%; object-fit: cover; }
        .cat-name { font-size: 11px; font-weight: bold; color: #4b5563; white-space: nowrap; }
        
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 15px; }
        @media (min-width: 640px) { .menu-grid { grid-template-columns: repeat(3, 1fr); } }
        .menu-item { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.03); border: 1px solid #f1f5f9; display: flex; flex-direction: column; position: relative; transition: transform 0.2s; }
        .menu-item:active { transform: scale(0.98); }
        .menu-img-box { position: relative; padding-top: 75%; overflow: hidden; }
        .menu-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
        .add-btn-mini { position: absolute; bottom: 10px; left: 10px; width: 32px; height: 32px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.15); color: #FF9F1C; font-size: 16px; z-index: 10; cursor: pointer; transition: 0.2s; }
        html[dir="ltr"] .add-btn-mini { left: auto; right: 10px; }
        
        .info-strip { display: flex; gap: 5px; padding: 0 10px; margin-top: -12px; position: relative; z-index: 5; }
        .cal-badge { background: #fff; border: 1px solid #fee2e2; color: #ef4444; font-size: 9px; font-weight: bold; padding: 3px 6px; border-radius: 6px; display: flex; align-items: center; gap: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .allergen-icon { width: 22px; height: 22px; background: #f0f9ff; border: 1px solid #e0f2fe; color: #0284c7; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        
        /* Modals & Cart */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }
        .product-modal { background: white; width: 90%; max-width: 450px; border-radius: 25px; overflow: hidden; transform: scale(0.9); transition: transform 0.3s; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); position: relative; display: flex; flex-direction: column; max-height: 90vh; }
        .modal-overlay.active .product-modal { transform: scale(1); }
        .modal-close { position: absolute; top: 15px; right: 15px; width: 35px; height: 35px; background: rgba(0,0,0,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 10; color: #4b5563; }
        html[dir="ltr"] .modal-close { right: auto; left: 15px; }
        .modal-img-box { width: 100%; height: 220px; background: #f8fafc; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .modal-img { max-width: 90%; max-height: 90%; object-fit: contain; }
        .modal-content { padding: 20px; overflow-y: auto; }
        .modal-title { font-size: 20px; font-weight: 900; color: #1f2937; margin-bottom: 5px; }
        .modal-desc { font-size: 13px; color: #6b7280; margin-bottom: 15px; }
        .modal-badges { display: flex; justify-content: center; flex-wrap: wrap; gap: 8px; margin-bottom: 15px; border-top: 1px solid #f3f4f6; padding-top: 10px; }
        .modal-badge { background: #f3f4f6; color: #4b5563; font-size: 11px; padding: 4px 10px; border-radius: 20px; display: flex; align-items: center; gap: 4px; font-weight: bold; }
        
        .notes-input { width: 100%; border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; font-size: 13px; margin-bottom: 15px; resize: none; background: #f9fafb; }
        .notes-input:focus { outline: none; border-color: #FF9F1C; background: white; }
        .cart-select { width: 100%; border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; font-size: 14px; background: white; margin-bottom: 10px; outline: none; font-weight: bold; color: #374151; }
        .cart-select:focus { border-color: #FF9F1C; }
        
        .payment-option { flex: 1; border: 1px solid #e5e7eb; border-radius: 12px; padding: 10px; text-align: center; font-size: 11px; font-weight: bold; color: #4b5563; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .payment-option:hover { background: #f9fafb; }
        .payment-option.active { border-color: #FF9F1C; background: #FFF7ED; color: #d97706; }
        
        .qty-control { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .qty-btn { width: 40px; height: 40px; background: #f3f4f6; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: bold; color: #374151; cursor: pointer; }
        .add-to-order-btn { width: 100%; background: #FF9F1C; color: white; padding: 15px; border-radius: 16px; font-weight: 800; font-size: 16px; display: flex; justify-content: space-between; align-items: center; }
        .cart-bar { position: fixed; bottom: 20px; left: 50%; transform: translate(-50%, 150%); z-index: 90; width: 90%; max-width: 500px; background: #1f2937; color: white; border-radius: 16px; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: 0.4s; cursor: pointer; }
        .cart-bar.show { transform: translate(-50%, 0); }
        .cart-modal-content { padding: 20px; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f3f4f6; padding: 10px 0; }
        .cart-item-info { flex: 1; }
        .cart-item-title { font-weight: bold; font-size: 14px; color: #1f2937; }
        .cart-item-note { font-size: 11px; color: #9ca3af; font-style: italic; }
        .cart-item-price { font-weight: bold; color: #FF9F1C; font-size: 13px; }
        .cart-remove-btn { color: #ef4444; background: #fee2e2; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; margin-right: 10px; cursor: pointer; }
        html[dir="ltr"] .cart-remove-btn { margin-right: 0; margin-left: 10px; }
        
        .scroll-top { position: fixed; bottom: 100px; right: 20px; z-index: 80; width: 40px; height: 40px; background: white; color: #374151; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1); opacity: 0; pointer-events: none; transition: 0.3s; border: 1px solid #e5e7eb; }
        html[dir="ltr"] .scroll-top { right: 20px; left: auto; }
        .scroll-top.show { opacity: 1; pointer-events: auto; }
        .fab-random { position: fixed; bottom: 100px; left: 20px; z-index: 80; background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%); color: white; padding: 10px 20px; border-radius: 50px; box-shadow: 0 10px 25px rgba(99, 102, 241, 0.4); font-weight: 800; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 8px; transition: transform 0.3s; animation: floatBtn 3s infinite ease-in-out; }
        html[dir="ltr"] .fab-random { left: auto; right: 20px; }
        @keyframes floatBtn { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        .random-content { text-align: center; padding: 30px 20px; }
        .random-img-box { width: 150px; height: 150px; margin: 0 auto 20px; border-radius: 50%; border: 5px solid #f3f4f6; overflow: hidden; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .random-img { width: 100%; height: 100%; object-fit: cover; }
        .shuffle-anim .random-img { filter: blur(2px); transform: scale(1.1); }
        
        .splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; display: flex; align-items: center; justify-content: center; transition: opacity 0.5s ease-out, visibility 0.5s; }
        .splash-screen.hidden { opacity: 0; visibility: hidden; }
        .splash-logo { width: 120px; animation: pulseLogo 1.5s infinite; }
        @keyframes pulseLogo { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .toast-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px); background: rgba(31, 41, 55, 0.95); color: white; padding: 12px 25px; border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 1000; font-size: 13px; font-weight: bold; display: flex; align-items: center; gap: 10px; transition: transform 0.4s; width: max-content; }
        .toast-box.show { transform: translateX(-50%) translateY(0); }
        .sec-header { display: flex; align-items: center; gap: 10px; padding: 25px 15px 10px 15px; scroll-margin-top: 130px; }
        .sec-header h3 { font-size: 18px; font-weight: 900; color: #1f2937; }
        .sec-line { flex: 1; height: 2px; background: #f3f4f6; border-radius: 2px; }
    </style>
</head>
<body class="bg-gray-50">

    <div class="splash-screen" id="splash"><img src="images/logo.png" class="splash-logo"></div>
    <div class="toast-box" id="toast"><i class="fa-solid fa-circle-check text-green-400"></i> <span id="toast-msg">ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</span></div>

    <div id="pwa-banner" class="fixed top-0 left-0 w-full bg-gray-900 text-white p-3 z-[100] hidden items-center justify-between shadow-md">
        <div class="flex items-center gap-3"><img src="images/logo.png" class="w-8 h-8 rounded-lg"><div class="text-xs font-bold"><p>ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ùˆ Ø¨Ø´Ø§Ù…ÙŠÙ„</p><p class="text-gray-400 font-normal">ØªØ¬Ø±Ø¨Ø© Ø£Ø³Ø±Ø¹ Ø¨Ø¯ÙˆÙ† Ù†Øª!</p></div></div>
        <button onclick="installPWA()" class="bg-orange-500 text-white px-3 py-1 rounded text-xs font-bold">ØªØ«Ø¨ÙŠØª</button>
    </div>

    <div class="fab-random" onclick="openRandomizer()"><i class="fa-solid fa-shuffle"></i> Ù…Ø­ØªØ§Ø±ØŸ</div>
    <div class="scroll-top" onclick="window.scrollTo(0,0)" id="scroll-top-btn"><i class="fa-solid fa-arrow-up"></i></div>

    <div class="marquee-strip"><div class="marquee-content" id="marquee-txt">...</div></div>

    <div class="bg-white p-4 flex justify-between items-center sticky top-0 z-50 shadow-sm border-b border-gray-100" style="position: relative;">
        <h1 class="text-xl font-black text-gray-800" data-i18n="menuTitle">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…</h1>
        <div class="flex gap-2">
            <button onclick="toggleLang()" id="lang-btn" class="bg-gray-100 h-9 px-3 rounded-xl flex items-center justify-center font-bold text-xs border border-gray-200">EN</button>
            <a href="index.html" class="w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-200"><i class="fa-solid fa-arrow-left rtl:rotate-0 ltr:rotate-180"></i></a>
        </div>
    </div>

    <div class="sticky-cats">
        <div class="px-4 mb-3">
            <div class="search-box">
                <input type="text" id="search-input" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¬Ø¨ØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©..." onkeyup="filterMenu()">
                <i class="fa-solid fa-search search-icon"></i>
            </div>
        </div>
        <div class="cat-scroll">
            <div class="cat-item active" id="nav-offers" onclick="scrollToSec('sec-offers')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/878/878052.png"></div><span class="cat-name" data-i18n="catOffers">Ø¹Ø±ÙˆØ¶</span></div>
            <div class="cat-item" id="nav-plates" onclick="scrollToSec('sec-plates')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/706/706164.png"></div><span class="cat-name" data-i18n="catPlates">Ø£Ø·Ø¨Ø§Ù‚</span></div>
            <div class="cat-item" id="nav-clay" onclick="scrollToSec('sec-clay')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/1895/1895658.png"></div><span class="cat-name" data-i18n="catClay">ÙØ®Ø§Ø±</span></div>
            <div class="cat-item" id="nav-sweets" onclick="scrollToSec('sec-sweets')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/2515/2515183.png"></div><span class="cat-name" data-i18n="catSweets">Ø­Ù„Ø§</span></div>
            <div class="cat-item" id="nav-drinks" onclick="scrollToSec('sec-drinks')"><div class="cat-circle"><img src="https://cdn-icons-png.flaticon.com/512/2738/2738730.png"></div><span class="cat-name" data-i18n="catDrinks">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</span></div>
            <div class="cat-item" onclick="filterFavorites()"><div class="cat-circle bg-red-50 border-red-100"><i class="fa-solid fa-heart text-red-500 text-xl"></i></div><span class="cat-name text-red-500">Ù…ÙØ¶Ù„ØªÙŠ</span></div>
        </div>
    </div>

    <div class="bg-orange-50/50 pb-6 pt-4" id="slider-section">
        <div class="px-4 mb-2 font-black text-gray-700 flex items-center gap-2"><i class="fa-solid fa-fire text-orange-500"></i> <span data-i18n="offersTitle">Ø§Ù„Ø¹Ø±ÙˆØ¶</span></div>
        <div class="slider-container group">
            <div class="slider-track" id="offers-track">
                <div class="offer-card" onclick="openProduct('Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©', 65, 'images/offer1.jpg', 850)"><img src="images/offer1.jpg"></div>
                <div class="offer-card" onclick="openProduct('Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©', 110, 'images/offer2.jpg', 1200)"><img src="images/offer2.jpg"></div>
                <div class="offer-card" onclick="openProduct('Ø¨ÙˆÙƒØ³ Ø¹Ø´Ø§Ù‚ Ø§Ù„Ø¯Ø¬Ø§Ø¬', 70, 'images/offer3.jpg', 900)"><img src="images/offer3.jpg"></div>
                <div class="offer-card" onclick="openProduct('Ø¨ÙˆÙƒØ³ Ø¹Ø´Ø§Ù‚ Ø§Ù„Ù„Ø­Ù…', 85, 'images/offer4.jpg', 950)"><img src="images/offer4.jpg"></div>
            </div>
        </div>
    </div>

    <div id="menu-container">
        <div id="sec-offers" class="menu-sec"><div class="sec-header"><h3 data-i18n="catOffers">Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªÙˆÙÙŠØ±</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø© family box" onclick="openProduct('Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©', 110, 'images/offer2.jpg', 1200, ['users'], 'Ø¹Ø±Ø¶ Ø¹Ø§Ø¦Ù„ÙŠ!')">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/offer2.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø¨ÙˆÙƒØ³ Ù„Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø©</h4><p class="text-sm font-black text-orange-500 mt-1">110 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø© movie night" onclick="openProduct('Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©', 65, 'images/offer1.jpg', 850, ['film'], 'ÙˆØ¬Ø¨Ø© ÙØ±Ø¯ÙŠØ©')">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/offer1.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©</h4><p class="text-sm font-black text-orange-500 mt-1">65 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-plates" class="menu-sec"><div class="sec-header"><h3 data-i18n="catPlates">Ø£Ø·Ø¨Ø§Ù‚</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬ special chicken" onclick="openProduct('Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬', 30, 'images/special_chicken.jpg', 450, ['cheese'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/special_chicken.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">30 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù… special meat" onclick="openProduct('Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù…', 35, 'images/special_meat.jpg', 500, ['cow'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù…')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/special_meat.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù„Ø­Ù…</h4><p class="text-sm font-black text-orange-500 mt-1">35 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³ potato balls" onclick="openProduct('ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³', 25, 'images/balls.jpg', 320, ['egg'])">
                <div class="fav-btn-card" onclick="toggleFav(event, 'ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/balls.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">ÙƒØ±Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ø·Ø³</h4><p class="text-sm font-black text-orange-500 mt-1">25 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬ moussaka chicken" onclick="openProduct('Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬', 25, 'images/moussaka_chicken.jpg', 380)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/moussaka_chicken.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø¨Ø´Ø§Ù…ÙŠÙ„ Ù…ØµÙ‚Ø¹Ø© Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">25 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-clay" class="menu-sec"><div class="sec-header"><h3 data-i18n="catClay">ÙØ®Ø§Ø±</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù… clay meat" onclick="openProduct('Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù…', 40, 'images/clay_meat.jpg', 550)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù…')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/clay_meat.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ù„Ø­Ù…</h4><p class="text-sm font-black text-orange-500 mt-1">40 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
            <div class="menu-item" data-name="Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬ clay chicken" onclick="openProduct('Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬', 35, 'images/clay_chicken.jpg', 520)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/clay_chicken.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">Ø¨Ø´Ø§Ù…ÙŠÙ„ ÙØ®Ø§Ø± Ø¯Ø¬Ø§Ø¬</h4><p class="text-sm font-black text-orange-500 mt-1">35 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-sweets" class="menu-sec"><div class="sec-header"><h3 data-i18n="catSweets">Ø­Ù„Ø§</h3><div class="sec-line"></div></div><div class="menu-grid">
            <div class="menu-item" data-name="ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ om ali" onclick="openProduct('ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ', 15, 'images/omali.jpg', 300)">
                <div class="fav-btn-card" onclick="toggleFav(event, 'ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ')"><i class="fa-regular fa-heart"></i></div>
                <div class="menu-img-box"><img src="images/omali.jpg" class="menu-img"></div><div class="p-3"><h4 class="font-bold text-xs text-gray-800">ÙØ®Ø§Ø± Ø£Ù… Ø¹Ù„ÙŠ</h4><p class="text-sm font-black text-orange-500 mt-1">15 <span class="curr">Ø±.Ø³</span></p></div>
            </div>
        </div></div>

        <div id="sec-drinks" class="menu-sec"><div class="sec-header"><h3 data-i18n="catDrinks">Ù…Ø´Ø±ÙˆØ¨Ø§Øª</h3><div class="sec-line"></div></div><div class="menu-grid" style="grid-template-columns: repeat(3, 1fr);">
            <div class="menu-item text-center" data-name="Ø¨ÙŠØ¨Ø³ÙŠ pepsi" onclick="openProduct('Ø¨ÙŠØ¨Ø³ÙŠ', 2.5, 'images/pepsi.png', 150)"><div class="p-2"><img src="images/pepsi.png" class="w-10 mx-auto"></div><h4 class="font-bold text-[10px]">Ø¨ÙŠØ¨Ø³ÙŠ</h4><p class="text-xs font-bold text-orange-500 pb-2">2.5 Ø±.Ø³</p></div>
            <div class="menu-item text-center" data-name="Ø³ÙÙ† Ø£Ø¨ 7up" onclick="openProduct('Ø³ÙÙ† Ø£Ø¨', 2.5, 'images/7up.png', 140)"><div class="p-2"><img src="images/7up.png" class="w-10 mx-auto filter hue-rotate-180"></div><h4 class="font-bold text-[10px]">Ø³ÙÙ† Ø£Ø¨</h4><p class="text-xs font-bold text-orange-500 pb-2">2.5 Ø±.Ø³</p></div>
            <div class="menu-item text-center" data-name="Ù…Ø§Ø¡ water" onclick="openProduct('Ù…Ø§Ø¡', 1, 'images/water.png', 0)"><div class="p-2"><img src="images/water.png" class="w-10 mx-auto"></div><h4 class="font-bold text-[10px]">Ù…Ø§Ø¡</h4><p class="text-xs font-bold text-orange-500 pb-2">1.0 Ø±.Ø³</p></div>
        </div></div>
    </div>

    <div class="cart-bar" id="cart-bar" onclick="openCartModal()">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center text-yellow-400 font-bold text-lg" id="cart-count">0</div>
            <div><p class="text-[10px] text-gray-300" data-i18n="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</p><p class="font-bold text-lg leading-none"><span id="cart-total">0</span> <span class="curr">Ø±.Ø³</span></p></div>
        </div>
        <div class="bg-yellow-500 text-gray-900 font-bold px-5 py-2 rounded-xl text-sm hover:bg-yellow-400 transition" data-i18n="viewCart">Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©</div>
    </div>

    <div class="modal-overlay" id="product-modal">
        <div class="product-modal">
            <div class="modal-close" onclick="closeModal()"><i class="fa-solid fa-times"></i></div>
            <div class="modal-img-box"><img src="" id="modal-img" class="modal-img"></div>
            <div class="modal-content">
                <h2 class="modal-title" id="modal-title">...</h2>
                <p class="modal-desc" id="modal-desc">...</p>
                <div style="text-align: center;"><div class="allergen-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ©</div><div class="modal-badges"><span class="modal-badge text-orange-600 bg-orange-50"><i class="fa-solid fa-fire"></i> <span id="modal-cals">0</span> Ø³Ø¹Ø±Ø©</span><div id="modal-allergens" class="flex gap-2"></div></div></div>
                <textarea class="notes-input" id="item-note" placeholder="Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø© (Ù…Ø«Ù„Ø§Ù‹: Ø¨Ø¯ÙˆÙ† Ø¨ØµÙ„)"></textarea>
                <div class="qty-control"><div class="qty-btn" onclick="updateQty(-1)">-</div><div class="qty-val" id="modal-qty">1</div><div class="qty-btn" onclick="updateQty(1)">+</div></div>
                <button class="add-to-order-btn" onclick="confirmAdd()"><span data-i18n="addToOrder">Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø·Ù„Ø¨ÙŠ</span><span><span id="modal-price">0</span> <span class="curr">Ø±.Ø³</span></span></button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="cart-modal">
        <div class="product-modal">
            <div class="modal-close" onclick="closeCartModal()"><i class="fa-solid fa-times"></i></div>
            <div class="p-4 border-b border-gray-100"><h2 class="text-xl font-bold text-gray-800">Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ğŸ›’</h2></div>
            <div class="cart-modal-content" id="cart-items-container" style="max-height: 300px; overflow-y: auto;"></div>
            
            <div class="p-4 bg-gray-50 mt-auto">
                <div class="flex gap-2 mb-3">
                    <input type="text" id="promo-code" class="w-full border rounded-lg px-3 py-2 text-xs uppercase" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ… (WOW20)">
                    <button onclick="applyPromo()" class="bg-gray-800 text-white px-4 rounded-lg text-xs font-bold">ØªØ·Ø¨ÙŠÙ‚</button>
                </div>
                <div id="promo-msg" class="text-xs font-bold text-green-500 hidden mb-2 text-center"></div>

                <div class="grid grid-cols-2 gap-2 mb-3">
                    <select id="branch-select" class="cart-select mb-0"><option value="yanbu">ÙØ±Ø¹ ÙŠÙ†Ø¨Ø¹</option><option value="jeddah">ÙØ±Ø¹ Ø¬Ø¯Ø©</option></select>
                    <select id="order-type" class="cart-select mb-0"><option value="delivery">ØªÙˆØµÙŠÙ„ ğŸ›µ</option><option value="pickup">Ø§Ø³ØªÙ„Ø§Ù… ğŸ›ï¸</option></select>
                </div>
                
                <div class="flex gap-2 mb-3 justify-center bg-white p-2 rounded-xl border border-gray-100">
                    <div class="payment-option active" onclick="selectPayment('cash', this)"><i class="fa-solid fa-money-bill-wave"></i></div>
                    <div class="payment-option" onclick="selectPayment('card', this)"><i class="fa-regular fa-credit-card"></i></div>
                    <div class="payment-option" onclick="selectPayment('apple', this)"><i class="fa-brands fa-apple"></i></div>
                </div>

                <div class="flex justify-between font-bold text-lg mb-4 text-gray-800"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span><span><span id="modal-cart-total">0</span> <span class="curr">Ø±.Ø³</span></span></div>
                <button class="add-to-order-btn justify-center" onclick="checkout()"><span data-i18n="checkout">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</span> <i class="fa-brands fa-whatsapp mr-2"></i></button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="random-modal"><div class="product-modal"><div class="modal-close" onclick="closeRandomModal()"><i class="fa-solid fa-times"></i></div><div class="random-content"><h2 class="text-2xl font-black text-gray-800 mb-2">ğŸ¤” Ù…Ø­ØªØ§Ø±ØŸ</h2><div class="random-img-box" id="random-box"><img src="images/logo.png" class="random-img" id="random-img"></div><h3 class="text-xl font-bold text-purple-600 mb-6" id="random-name">...</h3><button id="spin-btn" class="bg-purple-600 text-white w-full py-3 rounded-xl font-bold" onclick="spinRandomizer()">ÙŠÙ„Ø§ Ø§Ø®ØªØ§Ø± Ù„ÙŠ! ğŸ²</button><button id="add-random-btn" class="hidden bg-green-500 text-white w-full py-3 rounded-xl font-bold mt-2" onclick="addRandomToCart()">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø© (<span id="random-price">0</span> Ø±.Ø³) ğŸ›’</button></div></div></div>

    <script>
        // --- 1. SEARCH LOGIC ---
        function filterMenu() {
            const input = document.getElementById('search-input').value.toLowerCase();
            const items = document.querySelectorAll('.menu-item');
            const slider = document.getElementById('slider-section');
            
            // Hide slider when searching
            if(input.length > 0) slider.style.display = 'none';
            else slider.style.display = 'block';

            items.forEach(item => {
                const name = item.getAttribute('data-name').toLowerCase();
                if(name.includes(input)) item.style.display = 'flex';
                else item.style.display = 'none';
            });
        }

        // --- 2. FAVORITES LOGIC ---
        let favorites = JSON.parse(localStorage.getItem('wowFavs')) || [];

        function toggleFav(e, itemName) {
            e.stopPropagation(); // Stop opening product modal
            const btn = e.currentTarget;
            
            if(favorites.includes(itemName)) {
                favorites = favorites.filter(i => i !== itemName);
                btn.classList.remove('active');
                btn.innerHTML = '<i class="fa-regular fa-heart"></i>';
                showToast("ØªÙ… Ø§Ù„Ø­Ø°Ù Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø© ğŸ’”");
            } else {
                favorites.push(itemName);
                btn.classList.add('active');
                btn.innerHTML = '<i class="fa-solid fa-heart"></i>';
                showToast("ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø© â¤ï¸");
            }
            localStorage.setItem('wowFavs', JSON.stringify(favorites));
        }

        function loadFavs() {
            document.querySelectorAll('.menu-item').forEach(item => {
                const name = item.getAttribute('data-name').split(' ')[0]; // Basic match
                // We use title passed in onclick usually, let's match roughly by text content
                const title = item.querySelector('h4').innerText;
                if(favorites.includes(title)) {
                    const btn = item.querySelector('.fav-btn-card');
                    if(btn) {
                        btn.classList.add('active');
                        btn.innerHTML = '<i class="fa-solid fa-heart"></i>';
                    }
                }
            });
        }

        function filterFavorites() {
            const items = document.querySelectorAll('.menu-item');
            const slider = document.getElementById('slider-section');
            slider.style.display = 'none';
            
            items.forEach(item => {
                const title = item.querySelector('h4').innerText;
                if(favorites.includes(title)) item.style.display = 'flex';
                else item.style.display = 'none';
            });
            showToast("â¤ï¸ Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙØ¶Ù„Ø© ÙÙ‚Ø·");
        }

        // --- 3. PROMO CODE LOGIC ---
        let discount = 0;
        let appliedCode = "";

        function applyPromo() {
            const code = document.getElementById('promo-code').value.toUpperCase();
            const msg = document.getElementById('promo-msg');
            
            if(code === "WOW20") {
                discount = 0.20; // 20%
                appliedCode = "WOW20";
                msg.innerText = "âœ… ØªÙ… Ø®ØµÙ… 20% Ø¨Ù†Ø¬Ø§Ø­!";
                msg.classList.remove('hidden', 'text-red-500');
                msg.classList.add('text-green-500');
                updateCartUI();
            } else if (code === "") {
                discount = 0; appliedCode = "";
                msg.innerText = "";
                msg.classList.add('hidden');
                updateCartUI();
            } else {
                discount = 0; appliedCode = "";
                msg.innerText = "âŒ ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­";
                msg.classList.remove('hidden', 'text-green-500');
                msg.classList.add('text-red-500');
                updateCartUI();
            }
        }

        // --- CORE LOGIC UPDATE (Checkout with Discount) ---
        function updateCartUI() {
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            total = subtotal - (subtotal * discount);
            
            document.getElementById('cart-count').innerText = cart.length;
            document.getElementById('cart-total').innerText = total.toFixed(1);
            
            // Show discount in modal
            const modalTotal = document.getElementById('modal-cart-total');
            if(discount > 0) {
                modalTotal.innerHTML = `<span class="line-through text-gray-400 text-sm">${subtotal}</span> ${total.toFixed(1)}`;
            } else {
                modalTotal.innerText = total.toFixed(1);
            }

            const bar = document.getElementById('cart-bar');
            if(cart.length > 0) bar.classList.add('show'); else bar.classList.remove('show');
        }

        function checkout() {
            if (cart.length === 0) return;
            closeCartModal();
            
            // Confetti
            var duration = 2000; var end = Date.now() + duration;
            (function frame() { confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } }); confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } }); if (Date.now() < end) requestAnimationFrame(frame); }());

            const globalNote = document.getElementById('cart-note').value;
            const branchKey = document.getElementById('branch-select').value;
            const orderTypeKey = document.getElementById('order-type').value;
            const phone = branchKey === 'yanbu' ? '966538111577' : '966920004123';
            const branchName = branchKey === 'yanbu' ? 'ÙŠÙ†Ø¨Ø¹' : 'Ø¬Ø¯Ø©';
            const orderType = orderTypeKey === 'delivery' ? 'ØªÙˆØµÙŠÙ„ ğŸ›µ' : 'Ø§Ø³ØªÙ„Ø§Ù… ğŸ›ï¸';

            let message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (${branchName}):\n*Ø§Ù„Ù†ÙˆØ¹:* ${orderType}\n*Ø§Ù„Ø¯ÙØ¹:* ${selectedPayment}\n`;
            if(appliedCode) message += `*Ø§Ù„ÙƒÙˆØ¯:* ${appliedCode} (Ø®ØµÙ… 20%)\n`;
            message += `\n`;
            
            cart.forEach(item => {
                message += `â–ªï¸ *${item.qty}x ${item.name}* (${item.price} Ø±.Ø³)`;
                if(item.note) message += `\n   â•° âœï¸ ${item.note}`;
                message += `\n`;
            });
            if(globalNote) message += `\nğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${globalNote}\n`;
            message += `\nğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${total.toFixed(1)} Ø±.Ø³*`;
            
            setTimeout(() => { window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank'); }, 2000);
        }

        // --- INIT & UTILS ---
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('splash').classList.add('hidden'); loadFavs(); }, 2000); });
        
        // Previous Utils (Kept same)
        let currentItem = {}; let currentQty = 1; let cart = []; let total = 0; let selectedPayment = 'ÙƒØ§Ø´ ğŸ’µ';
        function showToast(msg) { const t = document.getElementById('toast'); document.getElementById('toast-msg').innerText = msg; t.classList.add('show'); setTimeout(() => t.classList.remove('show'), 2500); }
        function openProduct(title, price, img, cals, allergens = [], desc = "") { currentItem = { title, price }; currentQty = 1; document.getElementById('modal-title').innerText = title; document.getElementById('modal-desc').innerText = desc || "ÙˆØµÙ Ù…Ø®ØªØµØ±..."; document.getElementById('modal-img').src = img; document.getElementById('modal-cals').innerText = cals; document.getElementById('modal-qty').innerText = 1; document.getElementById('item-note').value = ""; updateModalPrice(); const algContainer = document.getElementById('modal-allergens'); algContainer.innerHTML = ''; if(allergens.length === 0) algContainer.innerHTML = '<span class="text-xs text-gray-400">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>'; allergens.forEach(icon => { algContainer.innerHTML += `<span class="modal-badge"><i class="fa-solid fa-${icon}"></i></span>`; }); document.getElementById('product-modal').classList.add('active'); }
        function closeModal() { document.getElementById('product-modal').classList.remove('active'); }
        function updateQty(change) { if (currentQty + change > 0) { currentQty += change; document.getElementById('modal-qty').innerText = currentQty; updateModalPrice(); } }
        function updateModalPrice() { document.getElementById('modal-price').innerText = currentItem.price * currentQty; }
        function confirmAdd() { const note = document.getElementById('item-note').value; addToCart(currentItem.title, currentItem.price * currentQty, currentQty, note); closeModal(); showToast('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©'); }
        function addToCart(name, price, qty, note) { cart.push({name, price, qty, note}); updateCartUI(); }
        function removeItem(index) { cart.splice(index, 1); updateCartUI(); renderCartItems(); if(cart.length === 0) closeCartModal(); }
        function openCartModal() { renderCartItems(); document.getElementById('cart-modal').classList.add('active'); }
        function closeCartModal() { document.getElementById('cart-modal').classList.remove('active'); }
        function renderCartItems() { const container = document.getElementById('cart-items-container'); container.innerHTML = ''; if(cart.length === 0) { container.innerHTML = '<p class="text-center text-gray-400 py-4">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>'; return; } cart.forEach((item, index) => { const noteHtml = item.note ? `<div class="cart-item-note">ğŸ“ ${item.note}</div>` : ''; container.innerHTML += `<div class="cart-item"><div class="cart-remove-btn" onclick="removeItem(${index})"><i class="fa-solid fa-times"></i></div><div class="cart-item-info"><div class="cart-item-title">${item.qty}x ${item.name}</div>${noteHtml}</div><div class="cart-item-price">${item.price} <span class="curr">Ø±.Ø³</span></div></div>`; }); }
        function selectPayment(type, elem) { document.querySelectorAll('.payment-option').forEach(el => el.classList.remove('active')); elem.classList.add('active'); if(type === 'cash') selectedPayment = 'ÙƒØ§Ø´ ğŸ’µ'; else if(type === 'card') selectedPayment = 'Ø´Ø¨ÙƒØ© ğŸ’³'; else if(type === 'apple') selectedPayment = 'Apple Pay ï£¿'; }
        function toggleLang() { const html = document.documentElement; const btn = document.getElementById('lang-btn'); const isRTL = html.dir === 'rtl'; if (isRTL) { html.dir = 'ltr'; html.lang = 'en'; btn.innerText = 'AR'; updateContent('en'); } else { html.dir = 'rtl'; html.lang = 'ar'; btn.innerText = 'EN'; updateContent('ar'); } }
        function updateContent(lang) { const translations = { ar: { menuTitle: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ø¹Ø§Ù…', offersTitle: 'Ø§Ù„Ø¹Ø±ÙˆØ¶', catOffers: 'Ø¹Ø±ÙˆØ¶', catPlates: 'Ø£Ø·Ø¨Ø§Ù‚', catClay: 'ÙØ®Ø§Ø±', catSweets: 'Ø­Ù„Ø§', catDrinks: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', total: 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ', checkout: 'Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨', curr: 'Ø±.Ø³', addToOrder: 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø·Ù„Ø¨ÙŠ', viewCart: 'Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©' }, en: { menuTitle: 'Food Menu', offersTitle: 'Offers', catOffers: 'Offers', catPlates: 'Plates', catClay: 'Clay', catSweets: 'Dessert', catDrinks: 'Drinks', total: 'Total', checkout: 'Checkout', curr: 'SAR', addToOrder: 'Add', viewCart: 'View Cart' } }; const t = translations[lang]; document.querySelectorAll('[data-i18n]').forEach(el => { const key = el.getAttribute('data-i18n'); if (t[key]) el.innerText = t[key]; }); document.querySelectorAll('.curr').forEach(el => el.innerText = t.curr); document.getElementById('marquee-txt').innerHTML = `<span class="marquee-item">ğŸ” Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø·ÙˆØ§Ø¬Ù†</span>`; }
        function scrollToSec(id) { const el = document.getElementById(id); const y = el.getBoundingClientRect().top + window.pageYOffset - 120; window.scrollTo({top: y, behavior: 'smooth'}); document.querySelectorAll('.cat-item').forEach(p => p.classList.remove('active')); if(id !== 'sec-offers') document.getElementById('slider-section').style.display='block'; event.currentTarget.classList.add('active'); }
        const slider = document.getElementById('offers-track'); let autoScroll; function scrollSlider(d) { slider.scrollBy({ left: d * 300 * (document.dir === 'rtl' ? -1 : 1), behavior: 'smooth' }); } function startAutoScroll() { autoScroll = setInterval(() => { if (Math.abs(slider.scrollLeft) >= slider.scrollWidth - slider.clientWidth - 20) { slider.scrollTo({ left: 0, behavior: 'smooth' }); } else { scrollSlider(1); } }, 3000); } function stopAutoScroll() { clearInterval(autoScroll); } document.addEventListener('DOMContentLoaded', () => { updateContent('ar'); startAutoScroll(); });
        
        // Randomizer
        const randomItems = [{name: 'Ø¨ÙˆÙƒØ³ ÙÙŠÙ„Ù… Ø§Ù„Ø³Ù‡Ø±Ø©', price: 65, img: 'images/offer1.jpg'}, {name: 'Ø³Ø¨ÙŠØ´Ø§Ù„ Ø¨Ø´Ø§Ù…ÙŠÙ„ Ø¯Ø¬Ø§Ø¬', price: 30, img: 'images/special_chicken.jpg'}]; // Add more
        let randomResult = null;
        function openRandomizer() { document.getElementById('random-modal').classList.add('active'); document.getElementById('spin-btn').classList.remove('hidden'); document.getElementById('add-random-btn').classList.add('hidden'); document.getElementById('random-name').innerText = "..."; document.getElementById('random-img').src = "images/logo.png"; }
        function closeRandomModal() { document.getElementById('random-modal').classList.remove('active'); }
        function spinRandomizer() { const imgEl = document.getElementById('random-img'); const nameEl = document.getElementById('random-name'); const box = document.getElementById('random-box'); box.classList.add('shuffle-anim'); document.getElementById('spin-btn').classList.add('hidden'); setTimeout(() => { box.classList.remove('shuffle-anim'); const winner = randomItems[Math.floor(Math.random() * randomItems.length)]; randomResult = winner; imgEl.src = winner.img; nameEl.innerText = `ğŸ‰ ${winner.name}`; document.getElementById('random-price').innerText = winner.price; document.getElementById('add-random-btn').classList.remove('hidden'); }, 2000); }
        function addRandomToCart() { if(randomResult) { addToCart(randomResult.name, randomResult.price, 1, "Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ ğŸ²"); closeRandomModal(); showToast("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ø®ØªÙŠØ§Ø±Ù†Ø§ Ù„Ù„Ø³Ù„Ø©!"); } }
        
        // Scroll Top
        window.onscroll = function() { const scrollBtn = document.getElementById('scroll-top-btn'); if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) { scrollBtn.classList.add('show'); } else { scrollBtn.classList.remove('show'); } };
        // PWA
        let deferredPrompt; window.addEventListener('beforeinstallprompt', (e) => { e.preventDefault(); deferredPrompt = e; document.getElementById('pwa-banner').style.display = 'flex'; });
        function installPWA() { document.getElementById('pwa-banner').style.display = 'none'; if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt = null; } }
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>

</body>
</html>
